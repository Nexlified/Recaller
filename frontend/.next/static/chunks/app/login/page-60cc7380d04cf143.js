(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2516:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(3464),s=t(9509);let o=a.A.create({baseURL:s.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api/v1",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let r=localStorage.getItem("token"),t=localStorage.getItem("tenantId")||"default";return r&&(e.headers.Authorization="Bearer ".concat(r)),t&&(e.headers["X-Tenant-ID"]=t),e}),o.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});class n{async login(e){let r=new FormData;r.append("username",e.username),r.append("password",e.password);let t=(await o.post("/login",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data;localStorage.setItem("token",t.access_token);let a=(await o.get("/users/me")).data;return localStorage.setItem("user",JSON.stringify(a)),{user:a,token:t}}async register(e){return(await o.post("/register",e)).data}async logout(){localStorage.removeItem("token"),localStorage.removeItem("user")}getCurrentUser(){{let e=localStorage.getItem("user");return e?JSON.parse(e):null}}getToken(){return localStorage.getItem("token")}isAuthenticated(){let e=this.getToken(),r=this.getCurrentUser();return!!(e&&r)}}let l=new n},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},7544:(e,r,t)=>{Promise.resolve().then(t.bind(t,9690))},9690:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(5155),s=t(2115),o=t(5695),n=t(6874),l=t.n(n),i=t(2516);function d(){let[e,r]=(0,s.useState)({email:"",password:""}),[t,n]=(0,s.useState)(""),[d,c]=(0,s.useState)(!1),u=(0,o.useRouter)(),m=e=>{let{name:a,value:s}=e.target;r(e=>({...e,[a]:s})),t&&n("")},p=async r=>{r.preventDefault(),c(!0),n("");try{if(!e.email||!e.password)return void n("Please fill in all fields");if(!e.email.includes("@"))return void n("Please enter a valid email address");await i.A.login({username:e.email,password:e.password}),u.push("/")}catch(e){var t,a,s;console.error("Login error:",e),(null==(t=e.response)?void 0:t.status)===400?n("Invalid email or password"):(null==(s=e.response)||null==(a=s.data)?void 0:a.detail)?n(e.response.data.detail):n("Login failed. Please try again.")}finally{c(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,a.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,a.jsx)(l(),{href:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"create a new account"})]})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:p,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:e.email,onChange:m,disabled:d})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:e.password,onChange:m,disabled:d})]})]}),t&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center bg-red-50 border border-red-200 rounded-md py-2 px-3",children:t}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Signing in...":"Sign in"})})]})]})})}}},e=>{e.O(0,[997,441,964,358],()=>e(e.s=7544)),_N_E=e.O()}]);